"use strict";var Sprite=function(){function t(t,e,i,r){this.game=t,this.sprite=this.game.add.sprite(e,i,r),this.sprite.anchor.set(.5,.5),this.game.physics.arcade.enable(this.sprite),this.sprite.body.collideWorldBounds=!0}return $traceurRuntime.createClass(t,{update:function(t){for(var e=0;e<t.length;e++)this.game.physics.arcade.collide(this.sprite,t[e].sprite)}},{get PADDLE_SPEED(){return 200}})}(),Paddle=function(t){function e(t,i,r,s){$traceurRuntime.superConstructor(e).call(this,t,i,r,s),this.sprite.body.immovable=!0}return $traceurRuntime.createClass(e,{},{get SPEED(){return 300}},t)}(Sprite),LeftPaddle=function(t){function e(){$traceurRuntime.superConstructor(e).apply(this,arguments)}return $traceurRuntime.createClass(e,{update:function(t){$traceurRuntime.superGet(this,e.prototype,"update").call(this,t),this.sprite.body.velocity.y=0,this.game.input.keyboard.isDown(Phaser.Keyboard.W)?this.sprite.body.velocity.y=-Paddle.SPEED:this.game.input.keyboard.isDown(Phaser.Keyboard.S)&&(this.sprite.body.velocity.y=Paddle.SPEED)}},{},t)}(Paddle),RightPaddle=function(t){function e(){$traceurRuntime.superConstructor(e).apply(this,arguments)}return $traceurRuntime.createClass(e,{update:function(t){$traceurRuntime.superGet(this,e.prototype,"update").call(this,t),this.sprite.body.velocity.y=0,this.game.input.keyboard.isDown(Phaser.Keyboard.UP)?this.sprite.body.velocity.y=-Paddle.SPEED:this.game.input.keyboard.isDown(Phaser.Keyboard.DOWN)&&(this.sprite.body.velocity.y=Paddle.SPEED)}},{},t)}(Paddle),Ball=function(t){function e(t,i,r,s,a){$traceurRuntime.superConstructor(e).call(this,t,i,r,s),this.updateScore=a,this.sprite.body.maxVelocity.x=e.SPEED,this.sprite.body.maxVelocity.y=e.SPEED;var n=Math.random();this.sprite.body.velocity.x=n>.5?e.SPEED:-e.SPEED,this.sprite.body.velocity.y=100*Math.random(),this.sprite.body.bounce.set(1),this.sprite.body.friction.set(1)}return $traceurRuntime.createClass(e,{update:function(t){$traceurRuntime.superGet(this,e.prototype,"update").call(this,t),this.sprite.body.blocked.left?this.updateScore("left"):this.sprite.body.blocked.right&&this.updateScore("right")}},{get SPEED(){return 500}},t)}(Sprite);window.onload=function(){function t(t){"left"==t?l.text++:c.text++}function e(){p.scale.pageAlignHorizontally=!0,p.scale.pageAlignVertically=!0,p.scale.refresh(),o=p.add.bitmapData(4,40),o.ctx.beginPath(),o.ctx.rect(0,0,o.width,o.height),o.ctx.fillStyle="#fff",o.ctx.fill(),d=p.add.bitmapData(6,6),d.ctx.beginPath(),d.ctx.rect(0,0,d.width,d.height),d.ctx.fillStyle="#fff",d.ctx.fill()}function i(){p.physics.startSystem(Phaser.Physics.ARCADE),s=new LeftPaddle(p,50,p.world.centerY,o),a=new RightPaddle(p,p.world.width-50,p.world.centerY,o),n=new Ball(p,p.world.centerX,p.world.centerY,d,t),l=p.add.text(0,0,0,{fontSize:"32px",fill:"#fff",boundsAlignH:"right"}),l.setTextBounds(0,10,p.world.width/2-10,32),c=p.add.text(0,0,0,{fontSize:"32px",fill:"#fff",boundsAlignH:"left"}),c.setTextBounds(p.world.width/2+10,10,p.world.width,32),u=p.add.text(0,0,"WINNER\n",{fontSize:"64px",fill:"#fff",boundsAlignH:"center",boundsAlignV:"middle",align:"center"}),u.visible=!1,u.setTextBounds(0,0,p.world.width,p.world.height),h=p.add.text(0,0,"Press ESC to restart",{fontSize:"24px",fill:"#fff",boundsAlignH:"center"}),h.visible=!1,h.setTextBounds(0,p.world.height-64,p.world.width,64),p.input.keyboard.onDownCallback=function(t){p.paused&&t.keyCode==Phaser.Keyboard.ESC&&(u.visible=!1,u.text="WINNER\n",h.visible=!1,l.text=0,c.text=0,p.paused=!1)}}function r(){function t(){if(l.text>=f)u.text+="LEFT";else{if(!(c.text>=f))return;u.text+="RIGHT"}u.visible=!0,h.visible=!0,p.paused=!0}s.update(n),a.update(n),n.update([s,a]),t()}var s,a,n,o,d,l,c,u,h,p=new Phaser.Game(800,600,Phaser.AUTO,"",{preload:e,create:i,update:r}),f=5};